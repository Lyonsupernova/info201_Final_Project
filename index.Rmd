---
title: "Final Porject Midpoint Deliverable"
author: "Amara, George, Lyons, Lufei Wang, Vicky"
date: "5/24/2019"
output: html_document
---

```{r setup, include = FALSE }
chooseCRANmirror(graphics=FALSE, ind=1)
knitr::opts_chunk$set(echo = TRUE)
house_sales <- read.csv("data/house_sales.csv", stringsAsFactors = FALSE)
source("scripts/barplot scripts.R")
source("scripts/Summary Information Script.R")
source("scripts/boxplot.R")
source("scripts/data table script.R")
source("scripts/linelot script.R")
source("scripts/heatmap script.R")
library("knitr")
```


## Introduction of Problem Domain and Dataset
***
This is a report about **housing** in *King County*. We are interested in housing market becuase buying/renting a house is relative to **everyone**, especially in King County where housing prices are extremely high. We want to look at how the specifications of the house affect the housing price. This report draws upon data from the [House Sales in King County](https://www.kaggle.com/harlfoxem/housesalesprediction). This datasets contains the house sale prices for King County between May 2014 to May 2015. It includes 19 house features as well as the price and id columns. It is generated by Harlfoxem from *public record*.


## Summary Information On House Sold in King County
***
The *columns* of the dataset include `r get_summary_info(house_sales)$column_name`. One of the houses sold has `r get_summary_info(house_sales)$most_bedrooms` bedrooms which is the house that contain the **largest number of bedrooms**. Between May 2014 to May 2015 in King County, the **most expansive** house sold for $`r get_summary_info(house_sales)$most_expensive_room`, and the **cheapest house** sold for $`r get_summary_info(house_sales)$cheapest_room`. One house has a *total house square footage* of `r get_summary_info(house_sales)$largest_houst_ft` which is the **largerst house** sold. 


## Aggregate Table
***
Below is a table that summarizes information on average square footage, mean bedrooms, mean bathrooms and prices based on the **sizes** of the houses sold. The sizes are sorted by the **range of total square footages** with smaller square footages shown first.

```{r summary_state, echo = FALSE}
kable(get_chart(house_sales), col.names = c("Square Footage Range", "Average Square Footage", "Mean Number of Bedrooms","Mean Number of Bathrooms", "Mean Prices"))
```

We choose to include this table because we want to exam the relationship between the sizes of the houses and the prices they sold for. On average, the bigger the houses the more expansive they are. One **outlier** we found is that the biggest houses(13,000-14,000sqft) sold for a relavent lower price.

## Bar Chart for on 2B2B house.
***
Below is a bar chart that shows the relationship between prices and number of floors on 2B2B houses.

```{r plot1, echo=FALSE} 
get_plot_info(house_sales)
```

Bar chart is a useful layout for comparing differences and making labels more legible. Although there are limitations, from the chart, we found that 2B2B houses that have **1.5** floors sold for the **highest** price and **2** floors sould for the **lowest** price.


## Boxplot For Relationship of Price and Month Sold
***
Below is a boxplot that shows the relationship of average prices sold and the month houses were sold.

```{r plot2, echo=FALSE, warning=FALSE} 
price_month_plot(house_sales)
```

Boxplot is useful for visualising the range and comparing distributions across the monthes. This boxplot shows the shape of the distribution, its central value and variability. We choose to exclude the minumum and maximum prices in each month because they spread really far. From the plot, we found that the median selling price **peeked** on April.The **lowest** median price is on Feb. We also found that all the boxplots are **uneven** in sizes with the upper quartiles further from the central value compares to the lower quartiles. This shows that the prices vary more when they are higher and less when they are lower.  


## Line Graph For Relationship of Year Built and Prices
***
Below is a line graph that shows the relationship of average prices sold and the year that houses were sold.
```{r plot3, echo=FALSE} 
year_price_plot(house_sales)
```

Line graphs is useful for compaing changes over some period  of time. One thing we found **surprising** is that houses that were built around 1933 on average sold for the highest price. This could be an ourlier and is worth for future study. Houses that were **newer**(built after 2010) sold for relavent higher prices as well, which was expected. 


## Heatmap Shows The Number of Sells On A Map
***
Below is a heatmap that shows the number of sells in different locations according to the longitude and latitude.
```{r plot4, echo=FALSE} 
base_plot +
  geom_polygon(
    stat = "density2d", # calculate two-dimensional density of points (contours)
    mapping = aes(fill = stat(level)), # use the computed density to set the fill
    alpha = .3 # Set the alpha (transparency)
  ) +
  scale_fill_gradient2(
    low = "white",
    mid = "yellow",
    high = "red"
  ) +
  labs(title="King County House Sale in 2015 HeatMap") +
  theme(plot.margin = margin(.3, 0, 0, 0, "cm"))
```

Heatmap is useful in showing the relative **intensity** of a value within an arrapy. The higher number of sells are "hotter" in red and the lower number of sells are "colder" in yellow. From the map, we see that the North Seattle had **higher** number of sells in King County between May 2014 to May 2015 while south seattle had lower number of sells.
